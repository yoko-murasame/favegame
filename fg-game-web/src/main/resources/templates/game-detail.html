<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="commons/common::commonHeaderWithStyle('Fave Game',~{::title},~{::link},~{::style})">
    <title>用户中心</title>
    <!--自己的css-->
    <link>
    <!--自己的style-->
    <style>
        body {
            font-size: 14px;
            color: #333;
            background-color: #fff;
        }

        .first {
            margin-top: 0;
        }

        .show-main-body {
            position: relative;
            line-height: 22px;
            background: #fff;
            border-radius: 3px;
            box-shadow: 0 2px 2px rgba(0, 0, 0, .05);
        }

        .in {
            display: block;
        }

        .section-title {
            height: 42px !important;
            height: 20px;
            margin-bottom: 15px;
            padding: 20px 30px 0;
            border-top: 1px solid #eee;
            border-bottom: none;
            margin: 0 0 15px;
        }

        #section-title2 {
            padding: 0;
            border: 0;
        }

        .section-title > h3 {
            float: left;
            margin: 0;
            padding: 0 0 0 8px;
            line-height: 20px;
            font-size: 18px;
            border-left: 4px solid #14B9C8;
            font-weight: 400;
        }

        #section-title2 > h3 {
            float: left;
            margin-right: 10px;
            margin-bottom: 15px;
        }

        .main-body-developer {
            padding: 20px 30px;
            border-bottom: 1px solid #eee;
        }

        .main-body-description {
            margin-bottom: 0;
        }

        .main-body-images {
            position: relative;
            margin: 0;
            padding: 20px 30px;
            border-top: 0;
        }

        .body-images-normal {
            position: relative;
            height: 280px;
            overflow: hidden;
            white-space: nowrap;
        }

        .checkbox {
            height: 22px;
            float: left;
            margin: 0;
            color: #999;
            position: relative;
            display: block;
        }

        .checkbox label {
            min-height: 20px;
            margin-bottom: 0;
            font-weight: 400;
            cursor: pointer;
            display: inline-block;
            max-width: 100%;
            color: #999;
        }

        .active {
            opacity: 1;
            visibility: visible
        }

        .more {
            float: right;
            font-size: 14px;
            margin-left: 20px;
            color: #14B9C8;
            text-decoration: none;
        }

        .body-images-normal {
            position: relative;
            height: 280px;
            overflow: hidden;
            white-space: nowrap;
        }

        .intro-list-unstyled {
            height: 100%;
            margin: 0;
            font-size: 0;
            white-space: nowrap;
            overflow-x: auto;
            overflow-y: hidden;
            padding-left: 0;
            list-style: none;
        }

        .intro-list-unstyled > li {
            display: inline-block;
            position: relative;
            height: 100%;
            padding-right: 10px;
            vertical-align: middle;
            list-style: none;
        }

        .intro-list-unstyled > li > a {
            display: block;
            height: 100%;
            z-index: 2;
            text-decoration: none;
        }

        .intro-list-unstyled > li > a > img {
            height: 100%;
            border-radius: 3px;
            vertical-align: middle;
            border: 0;
        }

        .intro-list-unstyled > li > a > video {
            height: 100%;
            border-radius: 3px;
            vertical-align: middle;
            border: 0;
        }

        .body-images-control {
            display: block;
            position: absolute;
            z-index: 2;
            height: 280px;
            top: 0;
            margin-bottom: -27.5px;
            width: 30px;
            cursor: pointer;
            text-decoration: none;
            transition: all .3s ease-in-out 0s;
        }

        .prev {
            left: 0;
        }

        .next {
            right: 0;
        }

        .main-body-additional {
            height: 38px;
            list-style: none;
            margin-top: 0;
            margin-bottom: 10px;
            padding-left: 30px !important;
        }

        .main-body-additional > li {
            float: left;
            margin-bottom: 10px;
            width: 33.3333333333%;
            white-space: nowrap;
        }

        .main-body-additional > li > i {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: url(/images/iconlist.png) no-repeat #14B9C8;
            background-size: 28px;
            display: inline-block;
            vertical-align: middle;
        }

        .lang-zh_CN {
            background-position: 0 -90px !important;
        }

        .network-yes {
            background-position: 0 -240px !important;
        }

        .main-body-additional > li > span {
            margin-left: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 80%;
        }

        .body-description-paragraph {
            position: relative;
            padding: 0 30px;
            word-wrap: break-word;
            transition: all .5s ease-in-out 0s;
        }

        .collapse {
            display: block;
            height: 132px;
        }

        .body-log-list {
            transition: all .3s;
            margin-bottom: 0;
            padding: 0 30px;
            word-wrap: break-word;
            word-break: normal;
        }

        .collapse2 {
            display: block;
            height: 100px;
        }

        .body-info-list {
            margin-bottom: 0;
            padding: 0 30px !important;
            font-size: 14px;
        }

        .body-info-list > li {
            float: left;
            margin-bottom: 10px;
            width: 30%;
            text-overflow: ellipsis;
        }

        .info-item-title {
            margin-bottom: 5px;
            font-weight: 700;
            display: block;
        }

        .info-item-content {
            color: #666;
        }

        .body-info-list > li > a {
            text-decoration: underline;
        }

        .link {
            height: 32px !important;
        }
    </style>
</head>

<body>

<div th:replace="commons/common::commonNavBar"></div>

<div th:replace="commons/common::commonNavHover"></div>

<div id="main-container">
    <div id="main-left">

        <div class="show-main-header">
            <div class="main-header-icon">
                <div class="header-icon-body">
                    <img itemprop="image" th:src="${game.data.gmIcon}" data-taptap-weixin-sharing="image">
                </div>
                <div class="main-header-rec">
                    <span>编辑推荐</span>
                </div>
            </div>
            <button type="button" class="app-qrcode-download icon-font icon-qrcode" data-toggle="modal"
                    data-target="#AppQrCodeDownload"></button>
            <div class="main-header-text">
                <div class="base-info-wrap">
							<span itemprop="aggregateRating" itemscope="" itemtype="" class="app-rating-block">
        					<span class="app-rating-container">
            					<span itemprop="ratingValue" class="app-rating-score"
                                      th:text="${game.data.gmMark==null?'无':game.data.gmMark}">7.2</span>
							</span>
							</span>
                    <h1 itemprop="name" class="main-header-game-name" th:text="${game.data.gmName}">楚留香</h1>
                    <div class="header-text-author">
                        <a th:href="|/search/${game.data.gmPublisherName}|" itemprop="publisher">
                            <span>厂商: </span>
                            <span itemprop="name" th:text="${game.data.gmPublisherName}">网易游戏</span>
                        </a>
                    </div>
                </div>
                <div class="header-text-download">
                    <div class="text-download-text">
                        <div class="app-data-wrap">
                            <button class=" taptap-button-friendship-simple js-taptap-button-friendship"
                                    data-taptap-ajax="follow" type="button" id="btn-cancle-collection"
                                    th:if="${!isCollect.data}"/>
                            <i class="app" th:if="${!isCollect.data}">
                                <img src="/images/iconfont/notice-blue.png">
                            </i>
                            <span class="follow" th:if="${!isCollect.data}">已关注</span>
                            </button>
                            <button class=" taptap-button-friendship-simple js-taptap-button-friendship"
                                    data-taptap-ajax="follow" type="button" id="btn-collection"
                                    th:if="${isCollect.data}"/>
                            <i class="app" th:if="${isCollect.data}">
                                <img src="/images/iconfont/notice.png"/>
                            </i>
                            <span class="follow" th:if="${isCollect.data}">关注</span>
                            </button>
                            <p class="description">
                                <span class="count-stats" th:text="|${game.data.countCollector==null?0:game.data.countCollector}人关注|"></span>
                            </p>
                        </div>
                        <span class="text-hints">7月26日更新：新门派太阴</span>
                    </div>

                    <div class="download-btn-wrap ">
                        <!--安卓判断-->
                        <div class="taptap-button-download" th:if="${game.data.gmPlatformIsAndroid == 1}">
                            <a th:href="${game.data.gmAndroidUrl}" th:if="${game.data.gmFree == 0 or game.data.gmFree == null or game.data.gmPrice==0 or game.data.gmPrice == null}">
                                <button class="btn btn-primary btn-lg android js-header-android-download" type="button">
                                    <i><img src="/images/iconfont/android.png"/></i>
                                    <span>下载</span>
                                </button>
                            </a>

                            <a th:href="@{|/order/add/${game.data.gmPrice}/${game.data.id}/${session.user.id}|}" th:if="${isPurchase.data==false and game.data.gmFree == 1 and game.data.gmPrice!=0 }">
                                <button class="btn btn-primary btn-lg android js-header-android-download" type="button">
                                    <i><img src="/images/iconfont/android.png"/></i>
                                    <span th:text="|￥${game.data.gmPrice}|">购买</span>
                                </button>
                            </a>

                            <a th:href="${game.data.gmAndroidUrl}" th:if="${isPurchase.data}">
                                <button class="btn btn-primary btn-lg android js-header-android-download" type="button">
                                    <i><img src="/images/iconfont/android.png"/></i>
                                    <span>下载(已购买)</span>
                                </button>
                            </a>
                        </div>
                        <!--暂无安卓下载-->
                        <div class="taptap-button-download" th:if="${game.data.gmPlatformIsAndroid == 0 or game.data.gmPlatformIsAndroid==null}">
                            <a th:href="@{#}">
                                <button disabled="disabled" class="btn btn-primary btn-lg android js-header-android-download" type="button">
                                    <i><img src="/images/iconfont/android.png"/></i>
                                    <span>暂无下载</span>
                                </button>
                            </a>
                        </div>
                        <!--IOS判断,有IOS-->
                        <div class="taptap-button-download" >
                            <a th:href="${game.data.gmIOSUrl}" target="_blank">
                                <button data-taptap-log="toGame" data-target="#iosDownloadModal"  th:if="${game.data.gmPlatformIsIOS == 1}">
                                    <i><img src="/images/iconfont/Apple.png"/></i>
                                    <span>App Store</span>
                                </button>
                            </a>
                        </div>

                        <!--无IOS-->
                        <div class="taptap-button-download" th:if="${game.data.gmPlatformIsIOS == 0 or game.data.gmPlatformIsIOS==null}">
                            <a th:href="@{#}">
                                <button disabled="disabled" data-taptap-log="toGame" data-target="#iosDownloadModal">
                                    <i><img src="/images/iconfont/Apple.png"/></i>
                                    <span>暂无IOS</span>
                                </button>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="main-header-tab">
                <ul class="nav nav-pills nav-justified">
                    <li role="presentation" class="">
                        <a href="#detail" aria-controls="detail" role="tab">详情</a>
                    </li>
                    <li role="presentation" class="">
                        <a href="#comment" aria-controls="detail" role="tab">评价
                            <!--<small>40827</small>-->
                        </a>
                    </li>
                    <!--<li role="presentation" class="">-->
                    <!--<a href="#" aria-controls="detail" role="tab">社区-->
                    <!--&lt;!&ndash;<small>33972</small>&ndash;&gt;-->
                    <!--</a>-->
                    <!--</li>-->
                </ul>
            </div>

        </div>
        <div class="show-main-body in first" data-taptap-tab-target="detail" id="detail">
            <div class="section-title">
                <h3>开发者的话:</h3>
            </div>
            <div class="main-body-developer main-body-description">
                <div class="text-wrapper" id="developer-speak">
                    <p th:text="${game.data.gmDetail}">乱党们好！</p>
                </div>
            </div>
            <div class="main-body-images">
                <div class="section-title" id="section-title2">
                    <h3>官方</h3>
                    <div class="checkbox active">
                        <label>
                            <input type="checkbox"> 视频自动播放
                        </label>
                    </div>
                    <div class="right-entry">
                        <a href="" class="more">玩家图片</a>
                        <a href="" class="more">玩家视频(2)</a>
                    </div>
                </div>
                <div class="body-images-normal">
                    <ul class="intro-list-unstyled" data-taptap-app="screenshots" id="imageShots">
                        <li th:each="media : ${game.data.gmIntroMedia}">
                            <a href="#" th:switch="${media.indexOf('mp4')==-1}">
                                <video th:src="${media}" th:case="false" controls/>
                                <img th:src="${media}" th:case="true"/>
                            </a>
                        </li>
                    </ul>
                    <a href="#" class="body-images-control prev" style="opacity: 0;">
                        <i class="taptap-icon icon-chevron-white-left"></i>
                    </a>
                    <a href="#" class="body-images-control next" style="opacity: 0;">
                        <i class="taptap-icon icon-chevron-white-right"></i>
                    </a>
                </div>
            </div>
            <ul class="main-body-additional">
                <li>
                    <i class="lang-zh_CN"></i>
                    <span>简体中文</span>
                </li>
                <li>
                    <i class="network-yes"></i>
                    <span>需要网络</span>
                </li>
            </ul>

            <div class="main-body-description">
                <div class="section-title">
                    <h3>简介</h3>
                    <div class="pull-right">
                    </div>
                </div>
                <div class="body-description-paragraph collapse" id="description" th:text="${game.data.gmDetail}">
                </div>
            </div>

            <div class="main-body-log main-body-description">
                <div class="section-title">
                    <h3>最近更新</h3>
                </div>
                <div class="body-log-list collapse2" id="app-log">
                    1.修复一部分手机进入游戏会闪退的问题。<br>2.游戏介绍里增加了一部萌萌萌萌萌萌萌萌萌萌萌萌萌萌哒的宣传视频，请查看 (≖ ‿ ≖)✧
                </div>
            </div>

            <div class="main-body-info">
                <div class="section-title">
                    <h3>详细信息</h3>
                </div>
                <ul class="intro-list-unstyled body-info-list">
                    <li>
                        <span class="info-item-title">文件大小:</span>
                        <span class="info-item-content">65.42MB</span>
                    </li>
                    <li>
                        <span class="info-item-title">当前版本:</span>
                        <span itemprop="softwareVersion" class="info-item-content">5.3.7</span>
                    </li>
                    <li>
                        <span class="info-item-title">更新时间:</span>
                        <span itemprop="datePublished" class="info-item-content"
                              th:text="${#dates.format(game.data.gmPubdate,'yyyy-MM-dd')}">2017年04月24日</span>
                    </li>
                    <li>
                        <span class="info-item-title">厂商:</span>
                        <a href="#" class="info-item-content link"
                           th:text="${game.data.gmPublisherName}">厦门魔兔网络科技有限公司</a>
                    </li>
                    <li>
                        <span class="info-item-title">官网:</span>
                        <a class="info-item-content" href="#">查看详情</a>
                    </li>
                </ul>
            </div>
        </div>
        <!--评论评价模块-->
        <div class="review-section">
            <!--总评分数据显示-->
            <div class="review-charts">
                <div class="review-ratings-container">
                    <div class=" review-ratings-total ">
                        <div class="total-rating ">
                            <span>总评分：</span>
                            <p class="text-download-rating ">
                                <i class="star-background "></i>
                                <i class="star-score " th:style="'width:'+70/10*${game.data.gmMark}+'px!important'"></i>
                                <span th:text="${game.data.gmMark==null?0:game.data.gmMark}">7.1</span>
                            </p>
                        </div>
                        <div class="recent-7-days ">
                            <span th:text="'最近版本:'+${game.data.gmVersion}">6.1</span>
                            <span>Android:7.1</span>
                            <span>IOS:7.3</span>
                            <span>近7天:6.0</span>
                        </div>
                    </div>
                    <div class="review-ratings-detail ">
                        <ul class="list-unstyled ">
                            <li>
                                <a href=" ">
                                    <span>5</span>
                                    <i></i>
                                    <div class="rating-item ">
                                        <div></div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href=" ">
                                    <span>4</span>
                                    <i></i>
                                    <div class="rating-item ">
                                        <div></div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href=" ">
                                    <span>3</span>
                                    <i></i>
                                    <div class="rating-item ">
                                        <div></div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href=" ">
                                    <span>2</span>
                                    <i></i>
                                    <div class="rating-item ">
                                        <div></div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href=" ">
                                    <span>1</span>
                                    <i></i>
                                    <div class="rating-item ">
                                        <div></div>
                                    </div>
                                </a>
                            </li>

                        </ul>
                    </div>
                </div>
            </div>

            <!--用户评分添加-->
            <div class="review-add " id="comment">
                <div class="review-add-user ">
                    <img th:src="${user.userPic}" alt=" "/>
                    <p th:text="${user.gmUsername}">锦爸爸</p>
                </div>
                <div class="review-add-stars ">
                    <p>
                        <i data-taptap-review-rating="star " data-text="讨厌 " data-taptap-review-toggle="modal "
                           class=""></i>
                        <i data-taptap-review-rating="star " data-text="不喜欢 " data-taptap-review-toggle="modal "
                           class=""></i>
                        <i data-taptap-review-rating="star " data-text="还可以 " data-taptap-review-toggle="modal "
                           class=" "></i>
                        <i data-taptap-review-rating="star " data-text="很不错 " data-taptap-review-toggle="modal "
                           class=" "></i>
                        <i data-taptap-review-rating="star " data-text="棒极了 " data-taptap-review-toggle="modal "
                           class=" "></i>
                    </p>
                    <span></span>
                </div>
                <button class="btn-link " data-toggle="modal" data-target="#comment-modal">
                    <span>发表评价</span>
                </button>
                <!--添加评论模态框-->
                <div class="modal fade" id="comment-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                     aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <div class="modal-header-user">
                                    <img th:src="${user.userPic}" alt="" class="img-circle">
                                    <p th:text="'评价者：'+${user.gmUsername}">评价者：15443410@Social</p>
                                </div>
                                <div class="switch-btn">
                                    <button type="button" class="btn-exit"
                                            data-taptap-action="review-modal-switch" style="display: none"></button>
                                </div>
                            </div>
                            <!--<input type="hidden" name="_token" value="QKo1vMOXpyNW7tzecFARCeGp4qPFJILNgDBpuVv1">-->
                            <!--<input type="hidden" name="app_id" value="2301">-->
                            <!--<input type="hidden" name="device" value="Web">-->
                            <div class="modal-body">
                                <!--<div class="modal-body-warning" data-taptap-review="error">-->
                                <!--<span>!</span>-->
                                <!--<p></p>-->
                                <!--</div>-->
                                <div class="modal-body-app">
                                    <img th:src="${game.data.gmIcon}" alt="">
                                    <p th:text="${game.data.gmName}">王者荣耀</p>
                                </div>
                                <div class="review-modal-right">
                                    <div class="modal-body-rate">
                            <span class="body-rate-star">
                                <i data-taptap-review-rating="star" data-text="讨厌"
                                   class=""></i>
                                <i data-taptap-review-rating="star" data-text="不喜欢"
                                   class=""></i>
                                <i data-taptap-review-rating="star" data-text="还可以"
                                   class=""></i>
                                <i data-taptap-review-rating="star" data-text="很不错"
                                   class=""></i>
                                <i data-taptap-review-rating="star" data-text="棒极了"
                                   class=""></i>
                            </span>
                                        <span class="body-rate-text" data-taptap-review-rating="tips"></span>
                                        <input type="hidden" name="score" value="" data-warning="请先对游戏进行评分">
                                    </div>
                                    <p class="accident-tips"></p>
                                    <div class="form-group">
                                    <textarea name="contents" data-paste-listen="true" id="comment-detail"
                                              class="form-control" cols="30"
                                              rows="6" placeholder="请写下你的宝贵意见" required=""></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <div class="pull-right">
                                    <button type="button" class="btn btn-default" data-dismiss="modal"
                                            aria-label="Close">取消
                                    </button>
                                    <button type="submit" class="btn btn-primary" id="comment-submit">发表</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--评论模态框结束-->

            </div>

            <!--评论标题-->
            <div class="review-title ">
                <h3>用户评价</h3>

            </div>
            <div id="review-list-div">
                <!--评论列表-->
                <ul class="review-list " th:each="comment : ${comments.data}">
                    <li class="review-item">
                        <a href="" class="review-avatar">
                            <img th:src="${comment.userPic}"/>
                        </a>
                        <div class="review-text">
                            <div class="text-header">
								<span class="fave-user">
									<a href="" class="user-name" th:text="${comment.gmUsername}"></a>
                                    <a style="display: none;" th:text="${comment.id}"></a>
									<i class="icon-verified"></i>
								</span>
                                <a href="" class="text-header-time">
                                    <span th:text="${#dates.format(comment.createTime,'yyyy-MM-dd')}">三小时前</span>
                                    <!--<span>已修改&gt;</span>-->
                                </a>
                                <button class="button-jubao"><span>举报</span></button>
                            </div>
                            <div class="text-score">
                                <i class="colored" th:style="'width:'+72/10*${comment.gmRate}+'px!important'"></i>
                                <i class="background"></i>
                                <span class="text-score-time">游戏时长 3小时22分钟</span>
                            </div>
                            <div class="text-body">
                                <p th:text="${comment.gmComment}">大沙发的方法阿孙方式</p>
                                <!--<p>发阿斯蒂芬艾弗森地方</p>-->
                                <!--<p>啊啊第三方 大厦的说法大师傅大师傅</p>-->
                            </div>
                            <div class="text-footer">
                                <!--<i class="icon-mobile-gray"></i>
                                <span class="text-footer-device"></span>-->
                                <ul class="list-unstyled" style="border-left:none;">
                                    <li>
                                        <button class="vote funny">
                                            <i class="icon">
                                                <img src="/images/cont/detail-smile.png"/>
                                            </i>
                                            <span>欢乐</span>
                                            <span>10</span>
                                        </button>
                                    </li>
                                    <li>
                                        <button class="vote up">
                                            <i class="icon"><img src="/images/cont/detail-good.png" alt=""/></i>
                                            <span th:text="${comment.favor}">5</span>
                                        </button>
                                    </li>
                                    <li>
                                        <button class="vote down">
                                            <i class="icon"><img src="/images/cont/detail-bad.png" alt=""/></i>
                                            <span th:text="${comment.against}">5</span>
                                        </button>
                                    </li>
                                    <li>
                                        <button class="vote opinon comment-btn-reply">
                                            <i class="icon"><img src="/images/cont/detail-message.png"/></i>
                                            <span>回复</span>
                                            <span th:text="${comment.replyNumber}">203</span>
                                        </button>
                                    </li>
                                </ul>
                            </div>
                            <div class="in-comments">
                                <ul class="list-unstyled"
                                    style="border-top: 1px solid #E1E1E1;border-left: none; padding-left: 0;">
                                    <li class="comment-item " th:each="reply : ${comment.replyVos}">
                                        <a href="" class="comment-item-avatar">
                                            <img th:src="${reply.userPic}" alt=""/>
                                        </a>
                                        <div class="comment-item-text">
                                            <div class="text-header-in">
                                                <span class="fave-user"><a href="" class="fave-user-name"
                                                                           th:text="${reply.gmUsername}">鞠丽丽</a></span>
                                                <a style="display: none;" th:text="${reply.id}"></a>
                                            </div>
                                            <div class="text-body-in">
                                                <p th:text="${reply.content}"></p>
                                            </div>
                                            <div class="text-footer-in">
                                                <ul class="list-unstyled foot-btn">
                                                    <li>
                                                        <span class="vote-noh"
                                                              th:text="${#dates.format(reply.createTime,'yyyy-MM-dd')}">18小时前</span>
                                                    </li>
                                                    <li>
                                                        <button class="vote reply-btn-reply">
                                                            <i><img src="/images/cont/detail-message.png" alt=""/></i>
                                                            <span>回复</span>
                                                        </button>

                                                    </li>
                                                    <li>
                                                        <button class="vote">
                                                            <i class="icon"><img
                                                                    src="/images/cont/detail-good.png"/></i>
                                                            <span th:text="${reply.favor}">5</span>
                                                        </button>
                                                    </li>
                                                    <li>
                                                        <button class="vote">
                                                            <i class="icon"><img src="/images/cont/detail-bad.png"/></i>
                                                            <span th:text="${reply.against}">6</span>
                                                        </button>
                                                    </li>
                                                    <li>
                                                        <button class="vote">
                                                            <span>举报</span>
                                                        </button>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <!--底部更多按钮-->
        <div class="body-footer ">
            <section class="bottom-more ">
                <a href=" " class="btn-more-lg ">更多</a>
            </section>
        </div>
    </div>
    <div id="main-right">
        <div class="social-spread-wechat">
            <img src="/images/code.png" alt="" id="side-code">
            <div>
                <div class="spread-logo-wrap chs">
                    <!--<span class="icon-font icon-logo"></span>-->
                    <span id="side-icon-title">越玩越Fave</span>
                </div>
                <div class="spread-wechat-divide">
                    <p>欢迎关注我们</p>
                </div>
                <ul class="list-inline spread-wechat-logos">
                    <li>
                        <span><img src="/images/wechat.png"/></span>
                        <div class="wechat-logo-qrcode">
									<span>
                        				<img src="" alt="">
                    				</span>
                        </div>
                    </li>
                    <li>
                        <span><img src="/images/qq.png"/></span>
                        <!--<div class="wechat-logo-qq">
                            <span>官方QQ群: 116587007</span>
                        </div>-->
                    </li>
                    <li>
                        <a class="icon-font ic_zhihu" href="#" target="_blank" rel="nofollow"></a>
                    </li>
                    <li>
                        <a class="icon-font ic_sina" href="#" target="_blank" rel="nofollow"></a>
                    </li>
                    <!--<li>
                        <a class="icon-font ic_mail" href="mailto:cooperation@taptap.com" rel="nofollow"></a>
                        <div class="wechat-logo-mail">
                            <span>
                                <a href="mailto:cooperation@taptap.com" rel="nofollow">合作邮箱: cooperation@taptap.com</a>
                            </span>
                        </div>
                    </li>-->
                </ul>
            </div>
        </div>
        <div class="section-title">
            <h3>厂商其他游戏</h3>
            <a href="#" class="pull-right">更多</a>
        </div>
        <div class="show-side-body" th:each="pubGame : ${pubGames.data.list}">
            <div class="game-detail-side-item">
                <a class="side-item-left" th:href="${pubGame.id}">
                    <img th:src="${pubGame.gmIcon}"/>
                </a>
                <div class="side-item-right ">
                    <a class="item-right-title flex-text-overflow " th:href="${pubGame.id}">
                        <span class="flex-text " th:text="${pubGame.gmName}">猫和老鼠：欢乐互动</span>
                    </a>
                    <div class="item-right-label ">
                        <a th:href="|/search/${pubGame.gmTypeName}|" th:text="${pubGame.gmTypeName}">多人</a>
                        <p class="right-label-rating pull-right ">
                            <span th:text="${pubGame.gmMark==null?0:pubGame.gmMark}">8.4</span>
                            <i><img src="/images/star.png"/></i>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--添加回复模态框-->
<div class="modal fade" aria-hidden="true" id="reply-modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-header-user">
                    <img th:src="${user.userPic}" alt="" class="img-circle reply-img-left">
                    <p th:text="${user.gmUsername}" class="reply-p-left"></p>
                    <img src="/images/cont/detail-toR.png"/>
                    <img alt="" class="img-circle reply-img-right">
                    <p class="reply-p-right"></p>
                </div>
            </div>
            <div class="modal-body">
                <div class="form-group" style="margin-bottom: 0px">
    <textarea name="contents" data-paste-listen="true" id="reply-detail"
              class="form-control" cols="30"
              rows="6" placeholder="请写下你的宝贵意见" required=""></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <div class="pull-right">
                    <button type="button" class="btn btn-default" data-dismiss="modal"
                            aria-label="Close">取消
                    </button>
                    <button type="submit" class="btn btn-primary" id="reply-submit">发表</button>
                </div>
            </div>
        </div>
    </div>
    <div id="comment-id"></div>
    <div id="reply-id"></div>
</div>
<!--</div>-->
<!--回复模态框结束-->

<div th:replace="commons/common::commonFooter(~{::script})">
</div>

<script th:inline="javascript">
    $(function () {
        $("#btn-collection").click(function () {
            var path = window.location.pathname;
            var collection = {};
            collection.gmCollectorId = [[${user.id}]];
            collection.gmGameId = [[${game.data.id}]];
            collection.gmGameName = /*[[${game.data.gmName}]]*/ null;
            console.log(collection);
            $.ajax({
                type: "post",
                url: "/gameVo/addCollec",
                data: collection,
                success: function (back) {
                    location.reload();
//                    console.log(back);
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    console.log("error",XMLHttpRequest,textStatus,errorThrown);
                }
            });
        });
        $("#btn-cancle-collection").click(function () {
            var collection = {};
            collection.gmCollectorId = [[${user.id}]];
            collection.gmGameId = [[${game.data.id}]];
            $.ajax({
                type: "post",
                url: "cancleCollect",
                data: collection,
                success: function (back) {
                    location.reload();
//                    console.log(back);
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    console.log("error");
                }
            });
        });

        //game-detail.js

        $("#reply-submit").click(function () {
            var reply = {};
            var path = window.location.pathname;
            reply.replierId = [[${user.id}]];
            reply.toCommentId = $("#comment-id").html();
            reply.content = $("#reply-detail").val();
            console.log(reply);
            $.ajax({
                type: "post",
                url: path + "/addReply",
                data: reply,
                success: function (back) {
                    location.reload();
//                    console.log(back);
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    console.log("error");

                }
            });
        });

        $("#comment-submit").click(function () {
            var comment = {};
            var path = window.location.pathname;
            comment.gmComment = $("#comment-detail").val();
            comment.gmCritic = [[${user.id}]];
            comment.gmGameId = [[${game.data.id}]];
            console.log($(".body-rate-star").children()[0].className);
            if ($(".body-rate-star").children()[0].className == "review-add-stars-hover") {
                comment.gmRate = 2;
            }
            if ($(".body-rate-star").children()[1].className == "review-add-stars-hover") {
                comment.gmRate = 4;
            }
            if ($(".body-rate-star").children()[2].className == "review-add-stars-hover") {
                comment.gmRate = 6;
            }
            if ($(".body-rate-star").children()[3].className == "review-add-stars-hover") {
                comment.gmRate = 8;
            }
            if ($(".body-rate-star").children()[4].className == "review-add-stars-hover") {
                comment.gmRate = 10;
            }
            console.log(comment);
            $.ajax({
                type: "post",
                url: path + "/addComment",
                data: comment,
                success: function (back) {
                    location.reload();
//                    console.log(back);
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    console.log("error");

                }
            });
        });


        //初始化星星样式
        $(".review-add-stars p i").hover(function () {
            var index = $(this).index();
            $(this).parent().children().removeClass("review-add-stars-hover");
            $(this).prevAll().addClass("review-add-stars-hover");
            $(this).addClass("review-add-stars-hover");
            var that = $(".body-rate-star i")[index];
            $(that).parent().children().removeClass("review-add-stars-hover");
            $(that).prevAll().addClass("review-add-stars-hover");
            $(that).addClass("review-add-stars-hover");
            if (index == 0) {
                $(".review-add-stars span").text("讨厌");
                $(".body-rate-text").text("讨厌");
            } else if (index == 1) {
                $(".review-add-stars span").text("不喜欢");
                $(".body-rate-text").text("不喜欢");
            } else if (index == 2) {
                $(".review-add-stars span").text("还可以");
                $(".body-rate-text").text("还可以");
            } else if (index == 3) {
                $(".review-add-stars span").text("很不错")
                $(".body-rate-text").text("很不错");
            } else if (index == 4) {
                $(".review-add-stars span").text("棒极了");
                $(".body-rate-text").text("棒极了");
            }
        });

        $(".review-add-stars p i").click(function () {
            $('#comment-modal').modal("show");
        });
        $(".comment-btn-reply").click(function () {
            $('#reply-modal').modal("show");
            var path = $(this).parent().parent().parent().parent().prev().children()[0].src;
            var name = $(this).parent().parent().parent().parent().children()[0].childNodes[1].childNodes[1].innerText;
            var commentId = $(this).parent().parent().parent().parent().children()[0].childNodes[1].childNodes[3].innerText;
            $(".reply-img-right").attr('src', path);
            $(".reply-p-right").text(name);
            $("#comment-id").html(commentId);
        });
        $(".reply-btn-reply").click(function () {
            $('#reply-modal').modal("show");
            var path = $(this).parent().parent().parent().parent().prev().children()[0].src;
            var name = $(this).parent().parent().parent().parent().children()[0].childNodes[1].childNodes[0].innerText;
            var commentId = $(this).parent().parent().parent().parent().parent().parent().parent().parent().children()[0].childNodes[1].childNodes[3].innerText;
            $("#comment-id").html(commentId);
            $(".reply-img-right").attr('src', path);
            $(".reply-p-right").text(name);
        });
//        $(".review-add-stars p i").mouseleave(function () {
//            $(this).parent().children().removeClass("review-add-stars-hover");
//            $(".review-add-stars span").text("");
//        });

        $(".body-rate-star i").click(function () {
            var index = $(this).index();
            $(this).parent().children().removeClass("review-add-stars-hover");
            $(this).prevAll().addClass("review-add-stars-hover");
            $(this).addClass("review-add-stars-hover");
            var that = $(".review-add-stars p i")[index];
            $(that).parent().children().removeClass("review-add-stars-hover");
            $(that).prevAll().addClass("review-add-stars-hover");
            $(that).addClass("review-add-stars-hover");
            if (index == 0) {
                $(".review-add-stars span").text("讨厌");
                $(".body-rate-text").text("讨厌");
            } else if (index == 1) {
                $(".review-add-stars span").text("不喜欢");
                $(".body-rate-text").text("不喜欢");
            } else if (index == 2) {
                $(".review-add-stars span").text("还可以");
                $(".body-rate-text").text("还可以");
            } else if (index == 3) {
                $(".review-add-stars span").text("很不错")
                $(".body-rate-text").text("很不错");
            } else if (index == 4) {
                $(".review-add-stars span").text("棒极了");
                $(".body-rate-text").text("棒极了");
            }
        });

//        $(".body-rate-star i").mouseleave(function () {
//            $(this).prevAll().removeClass("review-add-stars-hover");
//            $(this).removeClass("review-add-stars-hover");
//            $(".body-rate-text").text("");
//        });
    })
</script>

</body>

</html>